<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />
	<meta name="robots" content="noindex" />

	<title>File YiiAMQP.php | YiiAMQP</title>

	<script type="text/javascript" src="resources/combined.js?709491018"></script>
	<script type="text/javascript" src="elementlist.js?2810205929"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Namespaces</h3>
			<ul>
				<li class="active"><a href="namespace-None.html">None</a>
						</li>
				<li><a href="namespace-PHP.html">PHP</a>
						</li>
				<li><a href="namespace-PhpAmqpLib.html">PhpAmqpLib<span></span></a>
						<ul>
				<li><a href="namespace-PhpAmqpLib.Channel.html">Channel</a>
						</li>
				<li><a href="namespace-PhpAmqpLib.Connection.html">Connection</a>
						</li>
				<li><a href="namespace-PhpAmqpLib.Exception.html">Exception</a>
						</li>
				<li><a href="namespace-PhpAmqpLib.Helper.html">Helper<span></span></a>
						<ul>
				<li><a href="namespace-PhpAmqpLib.Helper.Protocol.html">Protocol</a>
						</li>
							</ul></li>
				<li><a href="namespace-PhpAmqpLib.Message.html">Message</a>
						</li>
				<li><a href="namespace-PhpAmqpLib.Tests.html">Tests<span></span></a>
						<ul>
				<li><a href="namespace-PhpAmqpLib.Tests.Functional.html">Functional</a>
						</li>
				<li><a href="namespace-PhpAmqpLib.Tests.Unit.html">Unit<span></span></a>
						<ul>
				<li><a href="namespace-PhpAmqpLib.Tests.Unit.Helper.html">Helper<span></span></a>
						<ul>
				<li><a href="namespace-PhpAmqpLib.Tests.Unit.Helper.Writer.html">Writer</a>
						</li>
							</ul></li></ul></li></ul></li>
				<li><a href="namespace-PhpAmqpLib.Wire.html">Wire</a>
						</li>
							</ul></li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li class="active"><a href="class-YiiAMQP.html">YiiAMQP</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="namespace-None.html" title="Summary of None"><span>Namespace</span></a>
			</li>
			<li>
				<a href="class-YiiAMQP.html" title="Summary of YiiAMQP"><span>Class</span></a>
			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<pre><code><span id="1" class="l"><a class="l" href="#1">  1: </a><span class="xlang">&lt;?php</span>
</span><span id="2" class="l"><a class="l" href="#2">  2: </a>
</span><span id="3" class="l"><a class="l" href="#3">  3: </a><span class="php-comment">/**
</span></span><span id="4" class="l"><a class="l" href="#4">  4: </a><span class="php-comment"> * YiiAMQP Component
</span></span><span id="5" class="l"><a class="l" href="#5">  5: </a><span class="php-comment"> *
</span></span><span id="6" class="l"><a class="l" href="#6">  6: </a><span class="php-comment"> * This is a Yii component (CApplicationComponent)
</span></span><span id="7" class="l"><a class="l" href="#7">  7: </a><span class="php-comment"> * 
</span></span><span id="8" class="l"><a class="l" href="#8">  8: </a><span class="php-comment"> *  @author Marc Teichtahl &lt;marc@teichtahl.com&gt;
</span></span><span id="9" class="l"><a class="l" href="#9">  9: </a><span class="php-comment"> * @copyright Copyright &amp;copy; Marc Teichtahl 2013-
</span></span><span id="10" class="l"><a class="l" href="#10"> 10: </a><span class="php-comment"> * @license http://www.opensource.org/licenses/bsd-license.php New BSD License
</span></span><span id="11" class="l"><a class="l" href="#11"> 11: </a><span class="php-comment"> * @version 1.0.0
</span></span><span id="12" class="l"><a class="l" href="#12"> 12: </a><span class="php-comment"> * 
</span></span><span id="13" class="l"><a class="l" href="#13"> 13: </a><span class="php-comment"> * @package YiiAMQP
</span></span><span id="14" class="l"><a class="l" href="#14"> 14: </a><span class="php-comment"> */</span>
</span><span id="15" class="l"><a class="l" href="#15"> 15: </a>Yii::app()-&gt;autoloader-&gt;getAutoloader()-&gt;addNamespace(<span class="php-quote">'PhpAmqpLib\Connection'</span>, __DIR__ . <span class="php-quote">'/PhpAmqpLib/Connection'</span>);
</span><span id="16" class="l"><a class="l" href="#16"> 16: </a>Yii::app()-&gt;autoloader-&gt;getAutoloader()-&gt;addNamespace(<span class="php-quote">'PhpAmqpLib\Channel'</span>, __DIR__ . <span class="php-quote">'/PhpAmqpLib/Channel'</span>);
</span><span id="17" class="l"><a class="l" href="#17"> 17: </a>Yii::app()-&gt;autoloader-&gt;getAutoloader()-&gt;addNamespace(<span class="php-quote">'PhpAmqpLib\Wire'</span>, __DIR__ . <span class="php-quote">'/PhpAmqpLib/Wire'</span>);
</span><span id="18" class="l"><a class="l" href="#18"> 18: </a>Yii::app()-&gt;autoloader-&gt;getAutoloader()-&gt;addNamespace(<span class="php-quote">'PhpAmqpLib\Helper'</span>, __DIR__ . <span class="php-quote">'/PhpAmqpLib/Helper'</span>);
</span><span id="19" class="l"><a class="l" href="#19"> 19: </a>Yii::app()-&gt;autoloader-&gt;getAutoloader()-&gt;addNamespace(<span class="php-quote">'PhpAmqpLib\Exception'</span>, __DIR__ . <span class="php-quote">'/PhpAmqpLib/Exception'</span>);
</span><span id="20" class="l"><a class="l" href="#20"> 20: </a>Yii::app()-&gt;autoloader-&gt;getAutoloader()-&gt;addNamespace(<span class="php-quote">'PhpAmqpLib\Message'</span>, __DIR__ . <span class="php-quote">'/PhpAmqpLib/Message'</span>);
</span><span id="21" class="l"><a class="l" href="#21"> 21: </a>
</span><span id="22" class="l"><a class="l" href="#22"> 22: </a><span class="php-comment">/**
</span></span><span id="23" class="l"><a class="l" href="#23"> 23: </a><span class="php-comment"> * YiiAMQP
</span></span><span id="24" class="l"><a class="l" href="#24"> 24: </a><span class="php-comment"> *
</span></span><span id="25" class="l"><a class="l" href="#25"> 25: </a><span class="php-comment"> * The class is a Yii CApplicationCompontent to be used as a component in Yii applications.
</span></span><span id="26" class="l"><a class="l" href="#26"> 26: </a><span class="php-comment"> * 
</span></span><span id="27" class="l"><a class="l" href="#27"> 27: </a><span class="php-comment"> *
</span></span><span id="28" class="l"><a class="l" href="#28"> 28: </a><span class="php-comment"> * @package    YiiAMQP
</span></span><span id="29" class="l"><a class="l" href="#29"> 29: </a><span class="php-comment"> * @subpackage Common
</span></span><span id="30" class="l"><a class="l" href="#30"> 30: </a><span class="php-comment"> * @author     Marc Teichtahl &lt;marc@teichtahl.com   &gt;
</span></span><span id="31" class="l"><a class="l" href="#31"> 31: </a><span class="php-comment"> */</span>
</span><span id="32" class="l"><a class="l" href="#32"> 32: </a><span class="php-keyword1">class</span> <a id="YiiAMQP" href="#YiiAMQP">YiiAMQP</a> <span class="php-keyword1">extends</span> CApplicationComponent {
</span><span id="33" class="l"><a class="l" href="#33"> 33: </a>
</span><span id="34" class="l"><a class="l" href="#34"> 34: </a>    <span class="php-keyword1">public</span> <span class="php-var"><a id="$server" href="#$server">$server</a></span>;
</span><span id="35" class="l"><a class="l" href="#35"> 35: </a>    <span class="php-keyword1">public</span> <span class="php-var"><a id="$connection" href="#$connection">$connection</a></span>;
</span><span id="36" class="l"><a class="l" href="#36"> 36: </a>    <span class="php-keyword1">public</span> <span class="php-var"><a id="$channel" href="#$channel">$channel</a></span>;
</span><span id="37" class="l"><a class="l" href="#37"> 37: </a>    <span class="php-keyword1">public</span> <span class="php-var"><a id="$queue" href="#$queue">$queue</a></span>;
</span><span id="38" class="l"><a class="l" href="#38"> 38: </a>    <span class="php-keyword1">public</span> <span class="php-var"><a id="$exchange" href="#$exchange">$exchange</a></span>;
</span><span id="39" class="l"><a class="l" href="#39"> 39: </a>    <span class="php-keyword1">public</span> <span class="php-var"><a id="$managementQueue" href="#$managementQueue">$managementQueue</a></span>;
</span><span id="40" class="l"><a class="l" href="#40"> 40: </a>    <span class="php-keyword1">public</span> <span class="php-var"><a id="$managementExchange" href="#$managementExchange">$managementExchange</a></span>;
</span><span id="41" class="l"><a class="l" href="#41"> 41: </a>    <span class="php-keyword1">public</span> <span class="php-var"><a id="$managementCallback" href="#$managementCallback">$managementCallback</a></span>;
</span><span id="42" class="l"><a class="l" href="#42"> 42: </a>    <span class="php-keyword1">private</span> <span class="php-var"><a id="$callback" href="#$callback">$callback</a></span>;
</span><span id="43" class="l"><a class="l" href="#43"> 43: </a>
</span><span id="44" class="l"><a class="l" href="#44"> 44: </a>    <span class="php-comment">/**
</span></span><span id="45" class="l"><a class="l" href="#45"> 45: </a><span class="php-comment">     * Creates a connection to a rabbitMQ server
</span></span><span id="46" class="l"><a class="l" href="#46"> 46: </a><span class="php-comment">     *
</span></span><span id="47" class="l"><a class="l" href="#47"> 47: </a><span class="php-comment">     * @param string $host IP Address or hostname of the rabbitMQ server. If NULL configuration setting will be used
</span></span><span id="48" class="l"><a class="l" href="#48"> 48: </a><span class="php-comment">     * @param string $port Post number of the rabbitMQ server. If NULL configuration setting will be used
</span></span><span id="49" class="l"><a class="l" href="#49"> 49: </a><span class="php-comment">     * @param string $user Username of the authorised rabbitMQ user. If NULL configuration setting will be used
</span></span><span id="50" class="l"><a class="l" href="#50"> 50: </a><span class="php-comment">     * @param string $password Password of the authorised rabbitMQ user. If NULL configuration setting will be used
</span></span><span id="51" class="l"><a class="l" href="#51"> 51: </a><span class="php-comment">     * @param string $vhost virtual rabbitMQ server. If NULL configuration setting will be used
</span></span><span id="52" class="l"><a class="l" href="#52"> 52: </a><span class="php-comment">     * 
</span></span><span id="53" class="l"><a class="l" href="#53"> 53: </a><span class="php-comment">     * @return An AMQP channel or FALSE on failure
</span></span><span id="54" class="l"><a class="l" href="#54"> 54: </a><span class="php-comment">     */</span>
</span><span id="55" class="l"><a class="l" href="#55"> 55: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_createConnection" href="#_createConnection">createConnection</a>(<span class="php-var">$host</span> = <span class="php-keyword1">NULL</span>, <span class="php-var">$port</span> = <span class="php-keyword1">NULL</span>, <span class="php-var">$user</span> = <span class="php-keyword1">NULL</span>, <span class="php-var">$password</span> = <span class="php-keyword1">NULL</span>, <span class="php-var">$vhost</span> = <span class="php-keyword1">NULL</span>) {
</span><span id="56" class="l"><a class="l" href="#56"> 56: </a>
</span><span id="57" class="l"><a class="l" href="#57"> 57: </a>        Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Creating connection'</span>, <span class="php-quote">'info'</span>);
</span><span id="58" class="l"><a class="l" href="#58"> 58: </a>
</span><span id="59" class="l"><a class="l" href="#59"> 59: </a>
</span><span id="60" class="l"><a class="l" href="#60"> 60: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$host</span>)
</span><span id="61" class="l"><a class="l" href="#61"> 61: </a>            <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'host'</span>] = <span class="php-var">$host</span>;
</span><span id="62" class="l"><a class="l" href="#62"> 62: </a>
</span><span id="63" class="l"><a class="l" href="#63"> 63: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$port</span>)
</span><span id="64" class="l"><a class="l" href="#64"> 64: </a>            <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'port'</span>] = <span class="php-var">$port</span>;
</span><span id="65" class="l"><a class="l" href="#65"> 65: </a>
</span><span id="66" class="l"><a class="l" href="#66"> 66: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$user</span>)
</span><span id="67" class="l"><a class="l" href="#67"> 67: </a>            <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'user'</span>] = <span class="php-var">$user</span>;
</span><span id="68" class="l"><a class="l" href="#68"> 68: </a>
</span><span id="69" class="l"><a class="l" href="#69"> 69: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$password</span>)
</span><span id="70" class="l"><a class="l" href="#70"> 70: </a>            <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'password'</span>] = <span class="php-var">$password</span>;
</span><span id="71" class="l"><a class="l" href="#71"> 71: </a>
</span><span id="72" class="l"><a class="l" href="#72"> 72: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$vhost</span>)
</span><span id="73" class="l"><a class="l" href="#73"> 73: </a>            <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'vhost'</span>] = <span class="php-var">$vhost</span>;
</span><span id="74" class="l"><a class="l" href="#74"> 74: </a>
</span><span id="75" class="l"><a class="l" href="#75"> 75: </a>        <span class="php-comment">// create the connection using $server as the config</span>
</span><span id="76" class="l"><a class="l" href="#76"> 76: </a>        <span class="php-var">$this</span>-&gt;connection = <span class="php-keyword1">new</span> PhpAmqpLib\Connection\AMQPConnection(<span class="php-var">$this</span>-&gt;server[<span class="php-quote">'host'</span>], <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'port'</span>], <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'user'</span>], <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'password'</span>], <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'vhost'</span>]);
</span><span id="77" class="l"><a class="l" href="#77"> 77: </a>
</span><span id="78" class="l"><a class="l" href="#78"> 78: </a>        <span class="php-keyword1">if</span> (!<span class="php-var">$this</span>-&gt;connection) {
</span><span id="79" class="l"><a class="l" href="#79"> 79: </a>            Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Cannot create connection'</span>, <span class="php-quote">'error'</span>);
</span><span id="80" class="l"><a class="l" href="#80"> 80: </a>            <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="81" class="l"><a class="l" href="#81"> 81: </a>        }
</span><span id="82" class="l"><a class="l" href="#82"> 82: </a>
</span><span id="83" class="l"><a class="l" href="#83"> 83: </a>        <span class="php-var">$this</span>-&gt;channel = <span class="php-var">$this</span>-&gt;connection-&gt;channel();
</span><span id="84" class="l"><a class="l" href="#84"> 84: </a>
</span><span id="85" class="l"><a class="l" href="#85"> 85: </a>        <span class="php-keyword1">if</span> (!<span class="php-var">$this</span>-&gt;channel) {
</span><span id="86" class="l"><a class="l" href="#86"> 86: </a>            Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Cannot create channel'</span>, <span class="php-quote">'error'</span>);
</span><span id="87" class="l"><a class="l" href="#87"> 87: </a>            <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="88" class="l"><a class="l" href="#88"> 88: </a>        }
</span><span id="89" class="l"><a class="l" href="#89"> 89: </a>
</span><span id="90" class="l"><a class="l" href="#90"> 90: </a>        Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Channel '</span> . <span class="php-var">$this</span>-&gt;channel-&gt;channel_id . <span class="php-quote">' created'</span>, <span class="php-quote">'info'</span>);
</span><span id="91" class="l"><a class="l" href="#91"> 91: </a>
</span><span id="92" class="l"><a class="l" href="#92"> 92: </a>        <span class="php-var">$this</span>-&gt;managementExchange = <span class="php-var">$this</span>-&gt;declareExchange(<span class="php-quote">'exchange.management'</span>, <span class="php-quote">'fanout'</span>);
</span><span id="93" class="l"><a class="l" href="#93"> 93: </a>
</span><span id="94" class="l"><a class="l" href="#94"> 94: </a>        Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Connected to '</span> . <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'host'</span>] . <span class="php-quote">':'</span> . <span class="php-var">$this</span>-&gt;server[<span class="php-quote">'port'</span>], <span class="php-quote">'info'</span>);
</span><span id="95" class="l"><a class="l" href="#95"> 95: </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;channel;
</span><span id="96" class="l"><a class="l" href="#96"> 96: </a>    }
</span><span id="97" class="l"><a class="l" href="#97"> 97: </a>
</span><span id="98" class="l"><a class="l" href="#98"> 98: </a>    <span class="php-comment">/**
</span></span><span id="99" class="l"><a class="l" href="#99"> 99: </a><span class="php-comment">     * Declares an AMQP queue
</span></span><span id="100" class="l"><a class="l" href="#100">100: </a><span class="php-comment">     *
</span></span><span id="101" class="l"><a class="l" href="#101">101: </a><span class="php-comment">     * @param string $name Name of the queue to be declared
</span></span><span id="102" class="l"><a class="l" href="#102">102: </a><span class="php-comment">     * @param bool $passive If set, the server will reply with Declare-Ok if the queue already exists with the same name, and raise an error if not
</span></span><span id="103" class="l"><a class="l" href="#103">103: </a><span class="php-comment">     * @param bool $durable If set when creating a new queue, the queue will be marked as durable. Durable queues remain active when a server restarts. Non-durable queues (transient queues) are purged if/when a server restarts. Note that durable queues do not necessarily hold persistent messages, although it does not make sense to send persistent messages to a transient queue.
</span></span><span id="104" class="l"><a class="l" href="#104">104: </a><span class="php-comment">     * @param bool $exclusive Exclusive queues may only be accessed by the current connection, and are deleted when that connection closes. Passive declaration of an exclusive queue by other connections are not allowed.
</span></span><span id="105" class="l"><a class="l" href="#105">105: </a><span class="php-comment">     * @param bool $auto_delete If set, the queue is deleted when all consumers have finished using it. The last consumer can be cancelled either explicitly or because its channel is closed. If there was no consumer ever on the queue, it won't be deleted. Applications can explicitly delete auto-delete queues using the Delete method as normal.
</span></span><span id="106" class="l"><a class="l" href="#106">106: </a><span class="php-comment">     * 
</span></span><span id="107" class="l"><a class="l" href="#107">107: </a><span class="php-comment">     * @return An AMQP channel or FALSE on failure
</span></span><span id="108" class="l"><a class="l" href="#108">108: </a><span class="php-comment">     */</span>
</span><span id="109" class="l"><a class="l" href="#109">109: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_declareQueue" href="#_declareQueue">declareQueue</a>(<span class="php-var">$name</span> = <span class="php-keyword1">NULL</span>, <span class="php-var">$passive</span> = <span class="php-keyword1">false</span>, <span class="php-var">$durable</span> = <span class="php-keyword1">true</span>, <span class="php-var">$exclusive</span> = <span class="php-keyword1">false</span>, <span class="php-var">$auto_delete</span> = <span class="php-keyword1">true</span>) {
</span><span id="110" class="l"><a class="l" href="#110">110: </a>
</span><span id="111" class="l"><a class="l" href="#111">111: </a>        <span class="php-keyword1">if</span> (!<span class="php-var">$name</span>)
</span><span id="112" class="l"><a class="l" href="#112">112: </a>            <span class="php-var">$name</span> = <span class="php-var">$this</span>-&gt;generateRandomString(<span class="php-quote">'10'</span>);
</span><span id="113" class="l"><a class="l" href="#113">113: </a>
</span><span id="114" class="l"><a class="l" href="#114">114: </a>        <span class="php-var">$ret</span> = <span class="php-var">$this</span>-&gt;channel-&gt;queue_declare(<span class="php-var">$name</span>, <span class="php-var">$passive</span>, <span class="php-var">$durable</span>, <span class="php-var">$exclusive</span>, <span class="php-var">$auto_delete</span>);
</span><span id="115" class="l"><a class="l" href="#115">115: </a>
</span><span id="116" class="l"><a class="l" href="#116">116: </a>        <span class="php-keyword1">if</span> (!<span class="php-keyword2">is_array</span>(<span class="php-var">$ret</span>)) {
</span><span id="117" class="l"><a class="l" href="#117">117: </a>            Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Cannot create queue'</span>, <span class="php-quote">'error'</span>);
</span><span id="118" class="l"><a class="l" href="#118">118: </a>            <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="119" class="l"><a class="l" href="#119">119: </a>        }
</span><span id="120" class="l"><a class="l" href="#120">120: </a>
</span><span id="121" class="l"><a class="l" href="#121">121: </a>        Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Created queue '</span> . <span class="php-var">$ret</span>[<span class="php-num">0</span>], <span class="php-quote">'info'</span>);
</span><span id="122" class="l"><a class="l" href="#122">122: </a>        <span class="php-var">$this</span>-&gt;bind(<span class="php-var">$name</span>, <span class="php-quote">'exchange.management'</span>);
</span><span id="123" class="l"><a class="l" href="#123">123: </a>        <span class="php-var">$this</span>-&gt;queue = <span class="php-var">$ret</span>[<span class="php-num">0</span>];
</span><span id="124" class="l"><a class="l" href="#124">124: </a>
</span><span id="125" class="l"><a class="l" href="#125">125: </a>        <span class="php-keyword1">return</span> <span class="php-var">$name</span>;
</span><span id="126" class="l"><a class="l" href="#126">126: </a>    }
</span><span id="127" class="l"><a class="l" href="#127">127: </a>
</span><span id="128" class="l"><a class="l" href="#128">128: </a>    <span class="php-comment">/**
</span></span><span id="129" class="l"><a class="l" href="#129">129: </a><span class="php-comment">     * Send a plain text message (content_type = text/plain)
</span></span><span id="130" class="l"><a class="l" href="#130">130: </a><span class="php-comment">     *
</span></span><span id="131" class="l"><a class="l" href="#131">131: </a><span class="php-comment">     * @param string $msg Content of the message to be sent
</span></span><span id="132" class="l"><a class="l" href="#132">132: </a><span class="php-comment">     * @param string $routingKey Routing key to be used
</span></span><span id="133" class="l"><a class="l" href="#133">133: </a><span class="php-comment">     * 
</span></span><span id="134" class="l"><a class="l" href="#134">134: </a><span class="php-comment">     */</span>
</span><span id="135" class="l"><a class="l" href="#135">135: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_sendTextMessage" href="#_sendTextMessage">sendTextMessage</a>(<span class="php-var">$msg</span>, <span class="php-var">$routingKey</span> = <span class="php-quote">''</span>) {
</span><span id="136" class="l"><a class="l" href="#136">136: </a>        <span class="php-var">$message</span> = <span class="php-keyword1">new</span> PhpAmqpLib\Message\AMQPMessage(<span class="php-var">$msg</span>, <span class="php-keyword1">array</span>(<span class="php-quote">'content_type'</span> =&gt; <span class="php-quote">'text/plain'</span>, <span class="php-quote">'delivery_mode'</span> =&gt; <span class="php-num">2</span>));
</span><span id="137" class="l"><a class="l" href="#137">137: </a>        <span class="php-var">$this</span>-&gt;channel-&gt;basic_publish(<span class="php-var">$message</span>, <span class="php-var">$this</span>-&gt;exchange, <span class="php-var">$routingKey</span>);
</span><span id="138" class="l"><a class="l" href="#138">138: </a>    }
</span><span id="139" class="l"><a class="l" href="#139">139: </a>
</span><span id="140" class="l"><a class="l" href="#140">140: </a>    <span class="php-comment">/**
</span></span><span id="141" class="l"><a class="l" href="#141">141: </a><span class="php-comment">     * Send a JSON  message (content_type = text/JSON)
</span></span><span id="142" class="l"><a class="l" href="#142">142: </a><span class="php-comment">     *
</span></span><span id="143" class="l"><a class="l" href="#143">143: </a><span class="php-comment">     * @param string $msg Content of the message to be sent
</span></span><span id="144" class="l"><a class="l" href="#144">144: </a><span class="php-comment">     * @param string $routingKey Routing key to be used
</span></span><span id="145" class="l"><a class="l" href="#145">145: </a><span class="php-comment">     * 
</span></span><span id="146" class="l"><a class="l" href="#146">146: </a><span class="php-comment">     */</span>
</span><span id="147" class="l"><a class="l" href="#147">147: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_sendJSONMessage" href="#_sendJSONMessage">sendJSONMessage</a>(<span class="php-var">$msg</span>, <span class="php-var">$routingKey</span> = <span class="php-quote">''</span>) {
</span><span id="148" class="l"><a class="l" href="#148">148: </a>        <span class="php-var">$message</span> = <span class="php-keyword1">new</span> PhpAmqpLib\Message\AMQPMessage(<span class="php-var">$msg</span>, <span class="php-keyword1">array</span>(<span class="php-quote">'content_type'</span> =&gt; <span class="php-quote">'text/JSON'</span>, <span class="php-quote">'delivery_mode'</span> =&gt; <span class="php-num">2</span>));
</span><span id="149" class="l"><a class="l" href="#149">149: </a>        <span class="php-var">$this</span>-&gt;channel-&gt;basic_publish(<span class="php-var">$message</span>, <span class="php-var">$this</span>-&gt;exchange, <span class="php-var">$routingKey</span>);
</span><span id="150" class="l"><a class="l" href="#150">150: </a>    }
</span><span id="151" class="l"><a class="l" href="#151">151: </a>
</span><span id="152" class="l"><a class="l" href="#152">152: </a>    <span class="php-comment">/**
</span></span><span id="153" class="l"><a class="l" href="#153">153: </a><span class="php-comment">     * Declares an AMQP exchange
</span></span><span id="154" class="l"><a class="l" href="#154">154: </a><span class="php-comment">     *
</span></span><span id="155" class="l"><a class="l" href="#155">155: </a><span class="php-comment">     * @param string $name Name of the exchange to be declared
</span></span><span id="156" class="l"><a class="l" href="#156">156: </a><span class="php-comment">     * @param string $type Each exchange belongs to one of a set of exchange types implemented by the server. The exchange types define the functionality of the exchange - i.e. how messages are routed through it. It is not valid or meaningful to attempt to change the type of an existing exchange.
</span></span><span id="157" class="l"><a class="l" href="#157">157: </a><span class="php-comment">     * @param bool $passive If set, the server will reply with Declare-Ok if the exchange already exists with the same name, and raise an error if not. The client can use this to check whether an exchange exists without modifying the server state. When set, all other method fields except name and no-wait are ignored. A declare with both passive and no-wait has no effect. Arguments are compared for semantic equivalence.
</span></span><span id="158" class="l"><a class="l" href="#158">158: </a><span class="php-comment">     * @param bool $durable If set when creating a new exchange, the exchange will be marked as durable. Durable exchanges remain active when a server restarts. Non-durable exchanges (transient exchanges) are purged if/when a server restarts.
</span></span><span id="159" class="l"><a class="l" href="#159">159: </a><span class="php-comment">     * @param bool $auto_delete If set, the exchange is deleted when all queues have finished using it.
</span></span><span id="160" class="l"><a class="l" href="#160">160: </a><span class="php-comment">     *
</span></span><span id="161" class="l"><a class="l" href="#161">161: </a><span class="php-comment">     * @return true on success, otherwise false
</span></span><span id="162" class="l"><a class="l" href="#162">162: </a><span class="php-comment">     */</span>
</span><span id="163" class="l"><a class="l" href="#163">163: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_declareExchange" href="#_declareExchange">declareExchange</a>(<span class="php-var">$name</span>, <span class="php-var">$type</span> = <span class="php-quote">'direct'</span>, <span class="php-var">$passive</span> = <span class="php-keyword1">false</span>, <span class="php-var">$durable</span> = <span class="php-keyword1">true</span>, <span class="php-var">$auto_delete</span> = <span class="php-keyword1">true</span>) {
</span><span id="164" class="l"><a class="l" href="#164">164: </a>
</span><span id="165" class="l"><a class="l" href="#165">165: </a>        <span class="php-var">$ret</span> = <span class="php-var">$this</span>-&gt;channel-&gt;exchange_declare(<span class="php-var">$name</span>, <span class="php-var">$type</span>, <span class="php-var">$passive</span>, <span class="php-var">$durable</span>, <span class="php-var">$auto_delete</span>);
</span><span id="166" class="l"><a class="l" href="#166">166: </a>        Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Created exchange '</span> . <span class="php-var">$name</span> . <span class="php-quote">' [ '</span> . <span class="php-var">$type</span> . <span class="php-quote">' ]'</span>, <span class="php-quote">'info'</span>);
</span><span id="167" class="l"><a class="l" href="#167">167: </a>        <span class="php-var">$this</span>-&gt;exchange = <span class="php-var">$name</span>;
</span><span id="168" class="l"><a class="l" href="#168">168: </a>        <span class="php-keyword1">return</span> <span class="php-keyword1">true</span>;
</span><span id="169" class="l"><a class="l" href="#169">169: </a>    }
</span><span id="170" class="l"><a class="l" href="#170">170: </a>
</span><span id="171" class="l"><a class="l" href="#171">171: </a>    <span class="php-comment">/**
</span></span><span id="172" class="l"><a class="l" href="#172">172: </a><span class="php-comment">     * Set QoS parameters for the current channel
</span></span><span id="173" class="l"><a class="l" href="#173">173: </a><span class="php-comment">     *
</span></span><span id="174" class="l"><a class="l" href="#174">174: </a><span class="php-comment">     * @param string|int $prefetch_size The client can request that messages be sent in advance so that when the client finishes processing a message, the following message is already held locally, rather than needing to be sent down the channel. Prefetching gives a performance improvement. This field specifies the prefetch window size in octets. The server will send a message in advance if it is equal to or smaller in size than the available prefetch size (and also falls into other prefetch limits). May be set to zero, meaning &quot;no specific limit&quot;, although other prefetch limits may still apply. The prefetch-size is ignored if the no-ack option is set.
</span></span><span id="175" class="l"><a class="l" href="#175">175: </a><span class="php-comment">     * @param string|int $prefetch_count Specifies a prefetch window in terms of whole messages. This field may be used in combination with the prefetch-size field; a message will only be sent in advance if both prefetch windows (and those at the channel and connection level) allow it. The prefetch-count is ignored if the no-ack option is set.
</span></span><span id="176" class="l"><a class="l" href="#176">176: </a><span class="php-comment">     * @param bool $a_global By default the QoS settings apply to the current channel only. If this field is set, they are applied to the entire connection.
</span></span><span id="177" class="l"><a class="l" href="#177">177: </a><span class="php-comment">     *
</span></span><span id="178" class="l"><a class="l" href="#178">178: </a><span class="php-comment">     * @return true on success, otherwise false
</span></span><span id="179" class="l"><a class="l" href="#179">179: </a><span class="php-comment">     */</span>
</span><span id="180" class="l"><a class="l" href="#180">180: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_setQos" href="#_setQos">setQos</a>(<span class="php-var">$prefetch_size</span>, <span class="php-var">$prefetch_count</span>, <span class="php-var">$a_global</span>) {
</span><span id="181" class="l"><a class="l" href="#181">181: </a>        <span class="php-var">$this</span>-&gt;channel-&gt;basic_qos(<span class="php-var">$prefetch_size</span>, <span class="php-var">$prefetch_count</span>, <span class="php-var">$a_global</span>);
</span><span id="182" class="l"><a class="l" href="#182">182: </a>    }
</span><span id="183" class="l"><a class="l" href="#183">183: </a>
</span><span id="184" class="l"><a class="l" href="#184">184: </a>    <span class="php-comment">/**
</span></span><span id="185" class="l"><a class="l" href="#185">185: </a><span class="php-comment">     * Bind a queue to an exchange
</span></span><span id="186" class="l"><a class="l" href="#186">186: </a><span class="php-comment">     *
</span></span><span id="187" class="l"><a class="l" href="#187">187: </a><span class="php-comment">     * @param string $queue Specifies the name of the destination exchange to bind.
</span></span><span id="188" class="l"><a class="l" href="#188">188: </a><span class="php-comment">     * @param string $exchange Specifies the name of the source exchange to bind.
</span></span><span id="189" class="l"><a class="l" href="#189">189: </a><span class="php-comment">     * @param string $routingKey Specifies the routing key for the binding. The routing key is used for routing messages depending on the exchange configuration. Not all exchanges use a routing key - refer to the specific exchange documentation.
</span></span><span id="190" class="l"><a class="l" href="#190">190: </a><span class="php-comment">     */</span>
</span><span id="191" class="l"><a class="l" href="#191">191: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_bind" href="#_bind">bind</a>(<span class="php-var">$queue</span>, <span class="php-var">$exchange</span>, <span class="php-var">$routingKey</span> = <span class="php-keyword1">NULL</span>) {
</span><span id="192" class="l"><a class="l" href="#192">192: </a>
</span><span id="193" class="l"><a class="l" href="#193">193: </a>        <span class="php-var">$this</span>-&gt;channel-&gt;queue_bind(<span class="php-var">$queue</span>, <span class="php-var">$exchange</span>, <span class="php-var">$routingKey</span>);
</span><span id="194" class="l"><a class="l" href="#194">194: </a>        Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Created binding ['</span> . <span class="php-var">$queue</span> . <span class="php-quote">' &lt;--&gt; '</span> . <span class="php-var">$exchange</span> . <span class="php-quote">']'</span>, <span class="php-quote">'info'</span>);
</span><span id="195" class="l"><a class="l" href="#195">195: </a>    }
</span><span id="196" class="l"><a class="l" href="#196">196: </a>
</span><span id="197" class="l"><a class="l" href="#197">197: </a>    <span class="php-comment">/**
</span></span><span id="198" class="l"><a class="l" href="#198">198: </a><span class="php-comment">     * This method asks the server to start a &quot;consumer&quot;, which is a transient request for messages from a specific queue. Consumers last as long as the channel they were declared on, or until the client cancels them.
</span></span><span id="199" class="l"><a class="l" href="#199">199: </a><span class="php-comment">     *
</span></span><span id="200" class="l"><a class="l" href="#200">200: </a><span class="php-comment">     * @param string $queue Specifies the name of the queue to consume from.
</span></span><span id="201" class="l"><a class="l" href="#201">201: </a><span class="php-comment">     * @param string $consumerTag Specifies the identifier for the consumer. The consumer tag is local to a channel, so two clients can use the same consumer tags. If this field is empty the server will generate a unique tag.
</span></span><span id="202" class="l"><a class="l" href="#202">202: </a><span class="php-comment">     * @param bool $noLocal Don't receive messages published by this consumer.
</span></span><span id="203" class="l"><a class="l" href="#203">203: </a><span class="php-comment">     * @param bool $noAck Tells the server if the consumer will acknowledge the messages.
</span></span><span id="204" class="l"><a class="l" href="#204">204: </a><span class="php-comment">     * @param bool $exclusive Request exclusive consumer access, meaning only this consumer can access the queue.
</span></span><span id="205" class="l"><a class="l" href="#205">205: </a><span class="php-comment">     * @param bool $nowait don't wait for a server response. In case of error the server will raise a channel exception
</span></span><span id="206" class="l"><a class="l" href="#206">206: </a><span class="php-comment">     */</span>
</span><span id="207" class="l"><a class="l" href="#207">207: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_consume" href="#_consume">consume</a>(<span class="php-var">$queue</span> = <span class="php-keyword1">NULL</span>, <span class="php-var">$consumerTag</span> = <span class="php-quote">''</span>, <span class="php-var">$noLocal</span> = <span class="php-keyword1">false</span>, <span class="php-var">$noAck</span> = <span class="php-keyword1">false</span>, <span class="php-var">$exclusive</span> = <span class="php-keyword1">false</span>, <span class="php-var">$nowait</span> = <span class="php-keyword1">false</span>) {
</span><span id="208" class="l"><a class="l" href="#208">208: </a>
</span><span id="209" class="l"><a class="l" href="#209">209: </a>        <span class="php-keyword1">if</span> (!<span class="php-var">$queue</span>)
</span><span id="210" class="l"><a class="l" href="#210">210: </a>            <span class="php-var">$queue</span> = <span class="php-var">$this</span>-&gt;queue;
</span><span id="211" class="l"><a class="l" href="#211">211: </a>
</span><span id="212" class="l"><a class="l" href="#212">212: </a>
</span><span id="213" class="l"><a class="l" href="#213">213: </a>        <span class="php-comment">/*
</span></span><span id="214" class="l"><a class="l" href="#214">214: </a><span class="php-comment">          queue: Queue from where to get the messages
</span></span><span id="215" class="l"><a class="l" href="#215">215: </a><span class="php-comment">          consumer_tag: Consumer identifier
</span></span><span id="216" class="l"><a class="l" href="#216">216: </a><span class="php-comment">          no_local: Don't receive messages published by this consumer.
</span></span><span id="217" class="l"><a class="l" href="#217">217: </a><span class="php-comment">          no_ack: Tells the server if the consumer will acknowledge the messages.
</span></span><span id="218" class="l"><a class="l" href="#218">218: </a><span class="php-comment">          exclusive: Request exclusive consumer access, meaning only this consumer can access the queue
</span></span><span id="219" class="l"><a class="l" href="#219">219: </a><span class="php-comment">          nowait: don't wait for a server response. In case of error the server will raise a channel
</span></span><span id="220" class="l"><a class="l" href="#220">220: </a><span class="php-comment">          exception
</span></span><span id="221" class="l"><a class="l" href="#221">221: </a><span class="php-comment">          callback: A PHP Callback
</span></span><span id="222" class="l"><a class="l" href="#222">222: </a><span class="php-comment">         */</span>
</span><span id="223" class="l"><a class="l" href="#223">223: </a>        <span class="php-var">$this</span>-&gt;channel-&gt;basic_consume(<span class="php-var">$queue</span>, <span class="php-var">$consumerTag</span>, <span class="php-var">$noLocal</span>, <span class="php-var">$noAck</span>, <span class="php-var">$exclusive</span>, <span class="php-var">$nowait</span>, <span class="php-var">$this</span>-&gt;callback);
</span><span id="224" class="l"><a class="l" href="#224">224: </a>    }
</span><span id="225" class="l"><a class="l" href="#225">225: </a>
</span><span id="226" class="l"><a class="l" href="#226">226: </a>    <span class="php-comment">/**
</span></span><span id="227" class="l"><a class="l" href="#227">227: </a><span class="php-comment">     * Wait for some expected AMQP methods and dispatch to them.
</span></span><span id="228" class="l"><a class="l" href="#228">228: </a><span class="php-comment">     *
</span></span><span id="229" class="l"><a class="l" href="#229">229: </a><span class="php-comment">     * */</span>
</span><span id="230" class="l"><a class="l" href="#230">230: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_wait" href="#_wait">wait</a>() {
</span><span id="231" class="l"><a class="l" href="#231">231: </a>        <span class="php-keyword1">while</span> (<span class="php-keyword2">count</span>(<span class="php-var">$this</span>-&gt;channel-&gt;callbacks)) {
</span><span id="232" class="l"><a class="l" href="#232">232: </a>            <span class="php-var">$this</span>-&gt;channel-&gt;wait();
</span><span id="233" class="l"><a class="l" href="#233">233: </a>        }
</span><span id="234" class="l"><a class="l" href="#234">234: </a>    }
</span><span id="235" class="l"><a class="l" href="#235">235: </a>
</span><span id="236" class="l"><a class="l" href="#236">236: </a>    <span class="php-comment">/**
</span></span><span id="237" class="l"><a class="l" href="#237">237: </a><span class="php-comment">     * Get the Id for the channel being used
</span></span><span id="238" class="l"><a class="l" href="#238">238: </a><span class="php-comment">     * 
</span></span><span id="239" class="l"><a class="l" href="#239">239: </a><span class="php-comment">     * @return integer
</span></span><span id="240" class="l"><a class="l" href="#240">240: </a><span class="php-comment">     *
</span></span><span id="241" class="l"><a class="l" href="#241">241: </a><span class="php-comment">     * */</span>
</span><span id="242" class="l"><a class="l" href="#242">242: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_getChannelId" href="#_getChannelId">getChannelId</a>() {
</span><span id="243" class="l"><a class="l" href="#243">243: </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;channel-&gt;getChannelId();
</span><span id="244" class="l"><a class="l" href="#244">244: </a>    }
</span><span id="245" class="l"><a class="l" href="#245">245: </a>
</span><span id="246" class="l"><a class="l" href="#246">246: </a>    <span class="php-comment">/**
</span></span><span id="247" class="l"><a class="l" href="#247">247: </a><span class="php-comment">     * Register a call back function that is called when a message is received
</span></span><span id="248" class="l"><a class="l" href="#248">248: </a><span class="php-comment">     * 
</span></span><span id="249" class="l"><a class="l" href="#249">249: </a><span class="php-comment">     * @param function
</span></span><span id="250" class="l"><a class="l" href="#250">250: </a><span class="php-comment">     *
</span></span><span id="251" class="l"><a class="l" href="#251">251: </a><span class="php-comment">     * */</span>
</span><span id="252" class="l"><a class="l" href="#252">252: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_registerCallback" href="#_registerCallback">registerCallback</a>(<span class="php-var">$callback</span>) {
</span><span id="253" class="l"><a class="l" href="#253">253: </a>        <span class="php-keyword1">if</span> (<span class="php-keyword2">is_callable</span>(<span class="php-var">$callback</span>)) {
</span><span id="254" class="l"><a class="l" href="#254">254: </a>            Yii::<span class="php-keyword2">log</span>(<span class="php-quote">'['</span> . <span class="php-keyword2">get_class</span>() . <span class="php-quote">'] Registering worker callback'</span>, <span class="php-quote">'info'</span>);
</span><span id="255" class="l"><a class="l" href="#255">255: </a>            <span class="php-var">$this</span>-&gt;callback = <span class="php-var">$callback</span>;
</span><span id="256" class="l"><a class="l" href="#256">256: </a>        }
</span><span id="257" class="l"><a class="l" href="#257">257: </a>    }
</span><span id="258" class="l"><a class="l" href="#258">258: </a>
</span><span id="259" class="l"><a class="l" href="#259">259: </a>    <span class="php-comment">/**
</span></span><span id="260" class="l"><a class="l" href="#260">260: </a><span class="php-comment">     * Utility function for returning a random string of specified length
</span></span><span id="261" class="l"><a class="l" href="#261">261: </a><span class="php-comment">     * 
</span></span><span id="262" class="l"><a class="l" href="#262">262: </a><span class="php-comment">     * @param int $length Length of the random string
</span></span><span id="263" class="l"><a class="l" href="#263">263: </a><span class="php-comment">     * @return string
</span></span><span id="264" class="l"><a class="l" href="#264">264: </a><span class="php-comment">     */</span>
</span><span id="265" class="l"><a class="l" href="#265">265: </a>    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> <a id="_generateRandomString" href="#_generateRandomString">generateRandomString</a>(<span class="php-var">$length</span> = <span class="php-num">10</span>) {
</span><span id="266" class="l"><a class="l" href="#266">266: </a>        <span class="php-var">$randomstring</span> = <span class="php-quote">''</span>;
</span><span id="267" class="l"><a class="l" href="#267">267: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$length</span> &gt; <span class="php-num">32</span>) {
</span><span id="268" class="l"><a class="l" href="#268">268: </a>            <span class="php-var">$multiplier</span> = <span class="php-keyword2">round</span>(<span class="php-var">$length</span> / <span class="php-num">32</span>, <span class="php-num">0</span>, PHP_ROUND_HALF_DOWN);
</span><span id="269" class="l"><a class="l" href="#269">269: </a>            <span class="php-var">$remainder</span> = <span class="php-var">$length</span> % <span class="php-num">32</span>;
</span><span id="270" class="l"><a class="l" href="#270">270: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$multiplier</span>; <span class="php-var">$i</span>++) {
</span><span id="271" class="l"><a class="l" href="#271">271: </a>                <span class="php-var">$randomstring</span> .= <span class="php-keyword2">substr</span>(<span class="php-keyword2">str_shuffle</span>(<span class="php-keyword2">md5</span>(<span class="php-keyword2">rand</span>())), <span class="php-num">0</span>, <span class="php-num">32</span>);
</span><span id="272" class="l"><a class="l" href="#272">272: </a>            }
</span><span id="273" class="l"><a class="l" href="#273">273: </a>            <span class="php-var">$randomstring</span> .= <span class="php-keyword2">substr</span>(<span class="php-keyword2">str_shuffle</span>(<span class="php-keyword2">md5</span>(<span class="php-keyword2">rand</span>())), <span class="php-num">0</span>, <span class="php-var">$remainder</span>);
</span><span id="274" class="l"><a class="l" href="#274">274: </a>        }
</span><span id="275" class="l"><a class="l" href="#275">275: </a>        <span class="php-keyword1">else</span>
</span><span id="276" class="l"><a class="l" href="#276">276: </a>            <span class="php-var">$randomstring</span> = <span class="php-keyword2">substr</span>(<span class="php-keyword2">str_shuffle</span>(<span class="php-keyword2">md5</span>(<span class="php-keyword2">rand</span>())), <span class="php-num">0</span>, <span class="php-var">$length</span>);
</span><span id="277" class="l"><a class="l" href="#277">277: </a>        <span class="php-keyword1">return</span> <span class="php-var">$randomstring</span>;
</span><span id="278" class="l"><a class="l" href="#278">278: </a>    }
</span><span id="279" class="l"><a class="l" href="#279">279: </a>
</span><span id="280" class="l"><a class="l" href="#280">280: </a>}
</span><span id="281" class="l"><a class="l" href="#281">281: </a>
</span><span id="282" class="l"><a class="l" href="#282">282: </a><span class="xlang">?&gt;</span>
</span><span id="283" class="l"><a class="l" href="#283">283: </a></span></code></pre>

	<div id="footer">
		YiiAMQP API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
